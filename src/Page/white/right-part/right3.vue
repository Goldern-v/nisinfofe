<template>
  <div>
    <boxBase title="值班医生" :icon="require('../images/值班医生.png')">
      <div class="body-con" v-loading="pageLoading" slot="body-con" flex="dir:top main:top" :class="{'body-con-hd':HOSPITAL_ID=='huadu'}" v-if="HOSPITAL_ID=='huadu'">
        <div flex="cross:center">
          <div class="label">值班医生：</div>
          <input flex-box="1" v-model="data.mainClassDoctor" @blur="update" />
        </div>
        <div style="height: 15px"></div>
        <div flex="cross:center">
          <div class="label">副班医生：</div>
          <input flex-box="1" v-model="data.onDutyDoctor" @blur="update" />
        </div>
        <div style="height: 15px"></div>
        <div flex="cross:center">
          <div class="label">住院总医生：</div>
          <input flex-box="1" v-model="data.secondTierDoctor" @blur="update" />
        </div>
        <div style="height: 15px"></div>
        <div flex="cross:center">
          <div class="label">二线医生：</div>
          <input flex-box="1" v-model="data.workClass" @blur="update" />
        </div>
      </div>
      <div class="body-con" v-loading="pageLoading" slot="body-con" flex="dir:top main:top"  v-if="HOSPITAL_ID=='xiegang'">
        <div flex="cross:center">
          <div class="label">二线医生：</div>
          <input flex-box="1" v-model="data.mainClassDoctor" @blur="update" />
        </div>
        <div style="height: 15px"></div>
        <div flex="cross:center">
          <div class="label">副班医生：</div>
          <input flex-box="1" v-model="data.onDutyDoctor" @blur="update" />
        </div>
        <div style="height: 15px"></div>
        <div flex="cross:center">
          <div class="label">电脑班：</div>
          <input flex-box="1" v-model="data.secondTierDoctor" @blur="update" />
        </div>
        <div style="height: 15px"></div>
        <div flex="cross:center">
          <div class="label">办公室：</div>
          <input flex-box="1" v-model="data.workClass" @blur="update" />
        </div>
      </div>
      <div class="body-con" v-loading="pageLoading" slot="body-con" flex="dir:top main:top" v-else>
        <div flex="cross:center">
          <div class="label">{{deptCode == '041002' && HOSPITAL_ID=='hj'?'门诊医生':'主班医生'}}：</div>
          <input flex-box="1" v-model="data.mainClassDoctor" @blur="update" />
        </div>
        <div style="height: 15px"></div>
        <div flex="cross:center">
          <div class="label">值班医生：</div>
          <input flex-box="1" v-model="data.onDutyDoctor" @blur="update" />
        </div>
        <div style="height: 15px"></div>
        <div flex="cross:center">
          <div class="label">二线医生：</div>
          <input flex-box="1" v-model="data.secondTierDoctor" @blur="update" />
        </div>
        <div style="height: 15px"></div>
        <div flex="cross:center">
          <div class="label">办公室：</div>
          <input flex-box="1" v-model="data.workClass" @blur="update" />
        </div>
        <template v-if="deptCode == '041702'">
          <div style="height: 15px"></div>
          <div flex="cross:center">
            <div class="label">创伤值班：</div>
            <input flex-box="1" v-model="data.traumaOnDuty" @blur="update" />
          </div>
        </template>
      </div>
    </boxBase>
  </div>
</template>
<style lang="stylus" rel="stylesheet/stylus" type="text/stylus" scoped>
.body-con {
  padding: 20px 20px;
  min-height: 220px;
  box-sizing: border-box;
  overflow: auto;
}

.label {
  width: 80px;
  font-size: 14px;
  color: #333333;
}

input {
  height: 32px;
  background: #FFFFFF;
  border: 1px solid #CBD5DD;
  border-radius: 2px;
  outline: none;
  padding-left: 10px;
}
.body-con-hd {
  .label {
    width: 85px;
  }
}

</style>
<script>
import boxBase from "../base/box-base.vue";
import { deptSetting } from "../api";
import common from "@/common/mixin/common.mixin.js";
import bus from "vue-happy-bus";
export default {
  mixins: [common],
  inject: ["update"],
  props: {
    data: Object,
    isSave: Boolean
  },
  data() {
    return {
      bus: bus(this),
      pageLoading: false,
      list: []
    };
  },
  created() {
    this.bus.$on("indexGetAllData", this.getData);
  },
  methods: {
    getData() {
      this.pageLoading = true;
      deptSetting(this.deptCode).then(res => {
        this.list = res.data.data.nurseDept;
        this.pageLoading = false;
      });
    }
  },
  components: {
    boxBase
  }
};
</script>
